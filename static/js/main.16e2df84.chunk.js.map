{"version":3,"sources":["common/Page/Page.js","common/Asteroid/Asteroid.js","api/nasaAPI.js","common/Loader/Loader.js","components/HomePage/HomePage.js","components/DestroyPage/DestroyPage.js","components/AsteroidPage/AsteroidPage.js","components/NoFoundPage/NoFoundPage.js","App.js","index.js"],"names":["Page","children","useState","cart","setCart","useEffect","cartInStorage","localStorage","getItem","JSON","parse","e","console","log","getFromStorage","className","Header","checkIsInCart","asteroid_id","findIndex","item","id","changeCart","indexInCart","value","push","splice","setItem","stringify","resetCart","Footer","to","activeClassName","exact","Asteroid","asteroid","distanceUnit","isInCart","isDangerous","style","backgroundSize","size","width","height","name","Attr","Date","unixtime","toLocaleString","year","month","day","slice","distanceLunar","distanceKM","renderDistance","onClick","bind","Approach","approach","velocity","full_date","toLocaleDateString","toLocaleTimeString","distance","orbiting_body","Asteroids","params","asteroids","map","TOKEN","getUrlByPage","page","start_date","end_date","setDate","getDate","toISOString","split","Loader","color","loading","HomePage","nextPage","setNextPage","setLoading","isEndData","setEndData","setAsteroids","isOnlyDangerous","setIsOnlyDangerous","distanceUnits","setDistanceUnits","getData","nextUrl","axios","get","then","res","parseInt","data","element_count","Object","values","near_earth_objects","flat","estimated_diameter","meters","estimated_diameter_max","estimated_diameter_min","is_potentially_hazardous_asteroid","close_approach_data","miss_distance","kilometers","lunar","epoch_date_close_approach","date","sort","a","b","getAsteroids","result","catch","error","alert","finally","handleChangeOnlyDangerous","handleChangeDistanceUnits","indexDistance","index","active","Settings","pageStart","loadMore","hasMore","loader","filter","find","type","onChange","htmlFor","linkActive","href","title","DestroyPage","history","useHistory","handleDestroy","renderContent","length","AsteroidPage","useParams","setAsteroid","approach_data","approach_item","relative_velocity","kilometers_per_hour","response","status","approach_index","NoFoundPage","App","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.16e2df84.chunk.js","sourcesContent":["import './style.scss';\r\n\r\nimport {Link, NavLink} from \"react-router-dom\";\r\nimport {useEffect, useState} from \"react\";\r\n\r\nexport function Page({children}) {\r\n\r\n    const [cart, setCart] = useState([]);\r\n\r\n    useEffect(() => {\r\n        setCart(getFromStorage());\r\n    }, []);\r\n\r\n\r\n    function getFromStorage() {\r\n        let cartInStorage = localStorage.getItem('cart');\r\n        if (cartInStorage) {\r\n            try {\r\n                return JSON.parse(cartInStorage);\r\n            } catch(e) {\r\n                console.log(e);\r\n            }\r\n        }\r\n        return [];\r\n    }\r\n\r\n    function changeCart(item) {\r\n        let cartInStorage = [...cart];\r\n\r\n        // check if item in cart\r\n        const indexInCart = cartInStorage.findIndex(value => value.id === item.id);\r\n\r\n        if (indexInCart === -1) {\r\n            //add\r\n            cartInStorage.push(item);\r\n        } else {\r\n            //delete\r\n            cartInStorage.splice(indexInCart, 1);\r\n\r\n        }\r\n        setCart(cartInStorage);\r\n        localStorage.setItem('cart', JSON.stringify(cartInStorage));\r\n    }\r\n\r\n    function resetCart() {\r\n        setCart([]);\r\n        localStorage.setItem('cart', JSON.stringify([]));\r\n    }\r\n\r\n    function checkIsInCart(asteroid_id) {\r\n        return (cart.findIndex((item) => item.id === asteroid_id) !== -1);\r\n    }\r\n\r\n\r\n\r\n    return <div className='page'>\r\n        <div className=\"page__inside\">\r\n            <Header/>\r\n            <main className='main'>\r\n                {\r\n                    children(\r\n                        {\r\n                            cart,\r\n                            checkIsInCart,\r\n                            changeCart,\r\n                            resetCart\r\n                        }\r\n                    )\r\n                }\r\n            </main>\r\n            <Footer/>\r\n        </div>\r\n    </div>;\r\n}\r\n\r\n\r\nfunction Header() {\r\n    return <header className={'header'}>\r\n        <div className=\"header__top\">\r\n            <div className=\"header__info\">\r\n                <h1 className=\"header__title\">\r\n                    <Link to='/' className={'header__title-link'}>ARMAGGEDON V</Link>\r\n                </h1>\r\n                <div className='header__subtitle'>Сервис мониторинга и уничтожения астероидов, опасно подлетающих к\r\n                    Земле.\r\n                </div>\r\n            </div>\r\n            <div className=\"header__menu\">\r\n                <nav className='menu'>\r\n                    <ul className='menu__list'>\r\n                        <li className='menu__item'>\r\n                            <NavLink to='/' className={'menu__link'} activeClassName='menu__link_active'\r\n                                     exact={true}>Астероиды</NavLink>\r\n                        </li>\r\n                        <li className='menu__item'>\r\n                            <NavLink to='/destroy' className={'menu__link'}\r\n                                     activeClassName='menu__link_active'>Уничтожение</NavLink>\r\n                        </li>\r\n                    </ul>\r\n                </nav>\r\n            </div>\r\n        </div>\r\n\r\n    </header>\r\n}\r\n\r\nfunction Footer() {\r\n    return <footer className='footer'>\r\n        <div className=\"footer__copyright\">2021 © Все права и планета защищены</div>\r\n    </footer>\r\n}","import './style.scss';\r\nimport {Link} from \"react-router-dom\";\r\n\r\n\r\n/*\r\n*  Size of Asteroid\r\n*   72px = 85m 1m = 1,180555555555556px\r\n*   189px = 300m 1m = 1,587301587301587px\r\n*   607px = 850m 1m = 1,400329489291598\r\n*\r\n*\r\n* ~ 1,389106666666667 = 1.4\r\n*\r\n* */\r\n\r\n\r\nexport function Asteroid({asteroid, distanceUnit, changeCart, isInCart}) {\r\n\r\n    function renderDistance() {\r\n        switch (distanceUnit?.name) {\r\n            case 'lunar':\r\n                return asteroid.distanceLunar.toLocaleString('ru-RU') + ' дист. до луны';\r\n            default:\r\n                return asteroid.distanceKM.toLocaleString('ru-RU') + ' км';\r\n        }\r\n    }\r\n\r\n    function renderDate() {\r\n        return new Date(asteroid.unixtime).toLocaleString('ru', {\r\n            year: 'numeric',\r\n            month: 'long',\r\n            day: 'numeric'\r\n        }).slice(0, -3)\r\n    }\r\n\r\n    return <article className={`asteroid ${asteroid.isDangerous ? 'asteroid_dangerous' : ''}`}>\r\n        <div className=\"asteroid__image-wrap\">\r\n            <div className=\"asteroid__image asteroid__image_dino\"></div>\r\n            <div className=\"asteroid__image asteroid__image_asteroid\" style={{backgroundSize : asteroid.size / 1.4, width : asteroid.size / 1.4, height : asteroid.size / 1.4}}></div>\r\n        </div>\r\n        <div className=\"asteroid__body\">\r\n            <div className=\"asteroid__info\">\r\n                <h2 className=\"asteroid__title\"><Link to={'asteroids/'+asteroid.id} className={'asteroid__link'}>{asteroid.name}</Link></h2>\r\n                <div className=\"asteroid__attrs\">\r\n                    <Attr name={'Дата'} value={renderDate()}/>\r\n                    <Attr name={'Расстояние'} value={renderDistance()}/>\r\n                    <Attr name={'Размер'} value={asteroid.size.toLocaleString('ru-RU') + ' м'}/>\r\n                </div>\r\n            </div>\r\n            <div className=\"asteroid__btn-wrap\">\r\n                <div className='asteroid__verdict'>\r\n                    <div className='asteroid__verdict-title'>Оценка:</div>\r\n                    <div className='asteroid__verdict-status'>{asteroid.isDangerous ? 'опасен' : 'не опасен'}</div>\r\n                </div>\r\n                <button className=\"asteroid__btn asteroid__btn_destroy\" onClick={changeCart.bind(null, asteroid)}>{ isInCart ? 'Не уничтожать' : 'На уничтожение' }</button>\r\n            </div>\r\n        </div>\r\n    </article>;\r\n}\r\n\r\nexport function Approach({approach}) {\r\n    return <article className={'approach'}>\r\n        <div className={'approach__attrs'}>\r\n            <Attr key='1' name={'Скорость'} value={approach.velocity.toLocaleString('ru-RU') +' км/ч'}/>\r\n            <Attr key='2' name={'Время'} value={approach.full_date.toLocaleDateString() + ' ' + approach.full_date.toLocaleTimeString()}/>\r\n            <Attr key='3' name={'Расстояние'} value={approach.distance.toLocaleString('ru-RU')  +' км'}/>\r\n            <Attr key='4' name={'Орбита'} value={approach.orbiting_body}/>\r\n        </div>\r\n    </article>;\r\n}\r\n\r\nfunction Attr({name, value}) {\r\n    return <dl className=\"attr\">\r\n        <dt className=\"attr__name\">{name}</dt>\r\n        <dd className=\"attr__value\"><span>{value}</span></dd>\r\n    </dl>;\r\n}\r\n\r\nexport function Asteroids({params, asteroids, distanceUnit}) {\r\n    return <div className={'asteroids'}>\r\n        {asteroids.map(asteroid => <Asteroid    key={asteroid.id}\r\n                                                asteroid={asteroid}\r\n                                                distanceUnit={distanceUnit}\r\n                                                isInCart={params.checkIsInCart(asteroid.id)}\r\n                                                changeCart={params.changeCart}\r\n                                     />)}\r\n    </div>\r\n}","//import {GET} from \"./ajax\";\r\nimport axios from \"axios\";\r\n\r\nconst TOKEN = \"cA2J0g0DcooBp1BYlwwEmW92VJQ5qcY5RzIYcYcL\";\r\n\r\n\r\nfunction getUrlByPage(page = 0) {\r\n    /* Api возвращает ссылку на следующую страницу, но в ней есть данные, которые пересекаются с предыдущей страницей.*/\r\n\r\n    const start_date = new Date();\r\n    const end_date = new Date();\r\n\r\n    if (!page) {\r\n        start_date.setDate(start_date.getDate() + page);\r\n        end_date.setDate(start_date.getDate() + 1);\r\n    } else {\r\n        start_date.setDate(start_date.getDate() + 2*page);\r\n        end_date.setDate(start_date.getDate() + 1);\r\n    }\r\n\r\n    return`http://www.neowsapp.com/rest/v1/feed?start_date=${start_date.toISOString().split('T')[0]}&end_date=${end_date.toISOString().split('T')[0]}&detailed=false&api_key=${TOKEN}`;\r\n}\r\n\r\nexport const getAsteroids = (page = 0) => {\r\n    let nextUrl = getUrlByPage(page);\r\n    return axios.get(nextUrl)\r\n        .then(res => {\r\n            if (parseInt(res.data.element_count) === 0) return false;\r\n            //nextUrl = res.data.links.next;\r\n            return Object.values(res.data.near_earth_objects).flat().map((item) => {\r\n                return {\r\n                    id: item.id,\r\n                    name: item.name,\r\n                    size: parseInt((item.estimated_diameter.meters.estimated_diameter_max + item.estimated_diameter.meters.estimated_diameter_min) / 2),\r\n                    isDangerous: item.is_potentially_hazardous_asteroid,\r\n                    distanceKM: parseInt(item.close_approach_data[0].miss_distance.kilometers),\r\n                    distanceLunar: parseInt(item.close_approach_data[0].miss_distance.lunar),\r\n                    unixtime : item.close_approach_data[0].epoch_date_close_approach,\r\n                    date: new Date(item.close_approach_data[0].epoch_date_close_approach),\r\n                }\r\n            }).sort((a, b) => a.unixtime - b.unixtime);\r\n        });\r\n}\r\n\r\n\r\nexport const getAsteroid = (id) => {\r\n    return axios.get(`https://api.nasa.gov/neo/rest/v1/neo/${id}?api_key=DEMO_KEY`)\r\n        .then(res => {\r\n            let item = res.data;\r\n            return {\r\n                id: item.id,\r\n                name: item.name,\r\n                size: parseInt((item.estimated_diameter.meters.estimated_diameter_max + item.estimated_diameter.meters.estimated_diameter_min) / 2),\r\n                isDangerous: item.is_potentially_hazardous_asteroid,\r\n                distanceKM: parseInt(item.close_approach_data[0].miss_distance.kilometers),\r\n                distanceLunar: parseInt(item.close_approach_data[0].miss_distance.lunar),\r\n                date: new Date(item.close_approach_data[0].epoch_date_close_approach),\r\n                unixtime: item.close_approach_data[0].epoch_date_close_approach,\r\n                approach_data: item.close_approach_data.map( approach_item => {\r\n                    return {\r\n                        velocity : parseInt(approach_item.relative_velocity.kilometers_per_hour),\r\n                        full_date : new Date(approach_item.epoch_date_close_approach),\r\n                        distance : parseInt(approach_item.miss_distance.kilometers),\r\n                        orbiting_body : approach_item.orbiting_body\r\n                    }\r\n                })\r\n            }\r\n        });\r\n}\r\n","import MoonLoader from 'react-spinners/MoonLoader';\r\nimport './Loader.scss';\r\n\r\nexport function Loader() {\r\n    return (\r\n      <div className='loader'>\r\n          <MoonLoader color={'#1C94C4'} loading={true} size={70} />\r\n      </div>\r\n    );\r\n}","import './HomePage.scss';\r\n\r\nimport {Page} from \"../../common/Page/Page\";\r\nimport {Asteroids} from \"../../common/Asteroid/Asteroid\";\r\nimport {useState} from \"react\";\r\nimport {getAsteroids} from \"../../api/nasaAPI\";\r\nimport InfiniteScroll from \"react-infinite-scroller\";\r\nimport {Loader} from \"../../common/Loader/Loader\";\r\n\r\nexport function HomePage() {\r\n    const [nextPage, setNextPage] = useState(0);\r\n    const [loading, setLoading] = useState(false);\r\n    const [isEndData, setEndData] = useState(false);\r\n    const [asteroids, setAsteroids] = useState([]);\r\n    const [isOnlyDangerous, setIsOnlyDangerous] = useState(false);\r\n    const [distanceUnits, setDistanceUnits] = useState([\r\n        {\r\n            'name': 'km',\r\n            'title': 'в километрах',\r\n            'active': true\r\n        },\r\n        {\r\n            'name': 'lunar',\r\n            'title': 'в дистанциях до луны',\r\n            'active': false\r\n        }\r\n    ]);\r\n\r\n    function getData() {\r\n        if (loading) return;\r\n        setLoading(true);\r\n        getAsteroids(nextPage)\r\n            .then((result) => {\r\n                if (result !== false) {\r\n                    setAsteroids([...asteroids, ...result]);\r\n                    setNextPage(nextPage + 1);\r\n                } else {\r\n                    setEndData(true);\r\n                }\r\n            }).catch((error) => {\r\n            console.log(error);\r\n            alert('Произошла ошибка получения данных');\r\n        }).finally(() => {\r\n            setLoading(false);\r\n        });\r\n    }\r\n\r\n    function handleChangeOnlyDangerous() {\r\n        setIsOnlyDangerous(!isOnlyDangerous);\r\n    }\r\n\r\n    function handleChangeDistanceUnits(indexDistance) {\r\n        setDistanceUnits(\r\n            distanceUnits.map((item, index) => {\r\n                if (index === indexDistance) {\r\n                    item.active = true;\r\n                } else {\r\n                    item.active = false;\r\n                }\r\n                return item;\r\n            })\r\n        );\r\n    }\r\n\r\n    function filterAsteroids() {\r\n        if (isOnlyDangerous) {\r\n            return asteroids.filter((item) => item.isDangerous);\r\n        } else {\r\n            return asteroids;\r\n        }\r\n    }\r\n\r\n    return <Page key={'home-page'}>\r\n        {\r\n            params => (\r\n                <div className='home-content'>\r\n                    <Settings handleChangeOnlyDangerous={handleChangeOnlyDangerous}\r\n                              distanceUnits={distanceUnits}\r\n                              handleChangeDistanceUnits={handleChangeDistanceUnits}/>\r\n                    <InfiniteScroll\r\n                        pageStart={0}\r\n                        loadMore={getData}\r\n                        hasMore={!isEndData}\r\n                        loader={<Loader/>}\r\n                    >\r\n                        <Asteroids asteroids={filterAsteroids()} params={params} distanceUnit={distanceUnits.find(item => item.active)}/>\r\n                    </InfiniteScroll>\r\n                </div>\r\n            )\r\n\r\n        }\r\n    </Page>\r\n}\r\n\r\n\r\nfunction Settings({handleChangeOnlyDangerous, distanceUnits, handleChangeDistanceUnits}) {\r\n\r\n    function renderDistanceUnitLinks() {\r\n        return distanceUnits.map((item, index) => {\r\n            let linkActive = (item.active) ? 'link_active' : '';\r\n            return <span key={index} className={'settings__change-distance'}><a href='#' className={'link ' + linkActive}\r\n                                                                    onClick={handleChangeDistanceUnits.bind(null, index)}>{item.title}</a></span>;\r\n        });\r\n    }\r\n\r\n    return <div className={'settings'}>\r\n        <div className=\"settings__field\">\r\n            <input type={'checkbox'} className={'settings__only-dangerous'} id={'settings__only-dangerous'}\r\n                   onChange={handleChangeOnlyDangerous}/>\r\n            <label className={'settings__label'} htmlFor={'settings__only-dangerous'}>Показать только опасные</label>\r\n        </div>\r\n        <div className=\"settings__distance\">Расстояние {renderDistanceUnitLinks()}</div>\r\n    </div>;\r\n}","import './DestroyPage.scss';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport {Page} from \"../../common/Page/Page\";\r\nimport {Asteroids} from \"../../common/Asteroid/Asteroid\";\r\n\r\nexport function DestroyPage() {\r\n\r\n    const history = useHistory();\r\n\r\n    function handleDestroy(resetCart) {\r\n        alert('Бригада будет доставлена на выбранные астероиды в нужный момент и выполнит свою нелёгкую работу.');\r\n        resetCart();\r\n        history.push('/');\r\n    }\r\n\r\n    function renderContent(params) {\r\n        if (!params.cart.length) {\r\n            return <div className='destroy__empty'>Астероиды для уничтожения не выбраны</div>\r\n        } else {\r\n            return <>\r\n                        <Asteroids params={params} asteroids={params.cart}/>\r\n                        <div className='destroy__content'>\r\n                            <button className='destroy__order-btn btn btn_destroy' onClick={handleDestroy.bind(null, params.resetCart)}>Заказать бригаду им. Брюса Уиллиса на\r\n                                выбранные астероиды.\r\n                            </button>\r\n                        </div>\r\n                    </>\r\n        }\r\n    }\r\n\r\n    return <Page key={'destroy-page'}>\r\n        {\r\n            params => {\r\n                return <div className='destroy-content'>\r\n                    {renderContent(params)}\r\n                </div>\r\n            }\r\n        }\r\n    </Page>\r\n}","import {Page} from \"../../common/Page/Page\";\r\nimport {Approach, Asteroid} from \"../../common/Asteroid/Asteroid\";\r\nimport {useEffect, useState} from \"react\";\r\nimport {getAsteroid} from \"../../api/nasaAPI\";\r\nimport {useParams, useHistory} from \"react-router-dom\";\r\nimport {Loader} from \"../../common/Loader/Loader\";\r\n\r\n\r\n\r\nexport function AsteroidPage() {\r\n\r\n    const {asteroid_id} = useParams();\r\n    let history = useHistory();\r\n    const [asteroid, setAsteroid] = useState(false);\r\n\r\n    useEffect(() => {\r\n        getAsteroid(asteroid_id)\r\n            .then((res) => {\r\n                setAsteroid(res);\r\n            }).catch((error)=>{\r\n                if (error.response?.status === 404) {\r\n                    history.push('/404');\r\n                } else {\r\n                    alert('Произошла ошибка при получении данных');\r\n                }\r\n            });\r\n    }, [asteroid_id]);\r\n\r\n    return <Page key={'asteroid-page'}>\r\n        {\r\n            params => {\r\n                return (asteroid) ? <div className={'asteroid-content'}>\r\n                    <Asteroid asteroid={asteroid} changeCart={params.changeCart} isInCart={params.checkIsInCart(asteroid.id)} />\r\n                    <section className='approaches'>\r\n                        <h2 className=\"approached__title\">Все сближения</h2>\r\n                        <div className=\"approaches__content\">\r\n                            {\r\n                                asteroid.approach_data.map((approach, approach_index) => <Approach key={approach_index} approach={approach}/>)\r\n                            }\r\n                        </div>\r\n                    </section>\r\n                </div> : <Loader />\r\n            }\r\n        }\r\n    </Page>\r\n}","import './NoFoundPage.scss';\r\n\r\nimport {Page} from \"../../common/Page/Page\";\r\n\r\nexport function NoFoundPage() {\r\n    return <Page key={'no-found-page'}>\r\n        {\r\n            params => {\r\n                return <div className='no-found-page'>\r\n                    <h2 className='no-found-page__code'>404</h2>\r\n                    <div>Страница не найдена</div>\r\n                </div>\r\n            }\r\n        }\r\n    </Page>\r\n}","import {HomePage} from \"./components/HomePage/HomePage\";\nimport {BrowserRouter as Router, Switch, Route} from \"react-router-dom\";\nimport {DestroyPage} from \"./components/DestroyPage/DestroyPage\";\nimport {AsteroidPage} from \"./components/AsteroidPage/AsteroidPage\";\nimport {NoFoundPage} from \"./components/NoFoundPage/NoFoundPage\";\n\nfunction App() {\n\n  return (\n      <Router>\n          <Switch>\n              <Route path=\"/destroy\">\n                  <DestroyPage />\n              </Route>\n              <Route path=\"/asteroids/:asteroid_id\">\n                  <AsteroidPage />\n              </Route>\n              <Route path=\"/\" exact>\n                  { <HomePage />}\n              </Route>\n              <Route path=\"*\">\n                  <NoFoundPage />\n              </Route>\n          </Switch>\n      </Router>\n\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}