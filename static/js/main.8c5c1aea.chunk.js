(this.webpackJsonptest_kvartirka=this.webpackJsonptest_kvartirka||[]).push([[0],{37:function(e,t,a){},38:function(e,t,a){},45:function(e,t,a){},65:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},75:function(e,t,a){"use strict";a.r(t);var s=a(1),c=a.n(s),n=a(29),i=a.n(n),r=a(13),d=a(8),o=(a(37),a(38),a(9)),l=a(0);function j(e){var t=e.children,a=Object(s.useState)([]),c=Object(d.a)(a,2),n=c[0],i=c[1];return Object(s.useEffect)((function(){i(function(){var e=localStorage.getItem("cart");if(e)try{return JSON.parse(e)}catch(t){console.log(t)}return[]}())}),[]),Object(l.jsx)("div",{className:"page",children:Object(l.jsxs)("div",{className:"page__inside",children:[Object(l.jsx)(u,{}),Object(l.jsx)("main",{className:"main",children:t({cart:n,checkIsInCart:function(e){return-1!==n.findIndex((function(t){return t.id===e}))},changeCart:function(e){var t=Object(r.a)(n),a=t.findIndex((function(t){return t.id===e.id}));-1===a?t.push(e):t.splice(a,1),i(t),localStorage.setItem("cart",JSON.stringify(t))},resetCart:function(){i([]),localStorage.setItem("cart",JSON.stringify([]))}})}),Object(l.jsx)(_,{})]})})}function u(){return Object(l.jsx)("header",{className:"header",children:Object(l.jsxs)("div",{className:"header__top",children:[Object(l.jsxs)("div",{className:"header__info",children:[Object(l.jsx)("h1",{className:"header__title",children:Object(l.jsx)(o.b,{to:"/",className:"header__title-link",children:"ARMAGGEDON V"})}),Object(l.jsx)("div",{className:"header__subtitle",children:"\u0421\u0435\u0440\u0432\u0438\u0441 \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433\u0430 \u0438 \u0443\u043d\u0438\u0447\u0442\u043e\u0436\u0435\u043d\u0438\u044f \u0430\u0441\u0442\u0435\u0440\u043e\u0438\u0434\u043e\u0432, \u043e\u043f\u0430\u0441\u043d\u043e \u043f\u043e\u0434\u043b\u0435\u0442\u0430\u044e\u0449\u0438\u0445 \u043a \u0417\u0435\u043c\u043b\u0435."})]}),Object(l.jsx)("div",{className:"header__menu",children:Object(l.jsx)("nav",{className:"menu",children:Object(l.jsxs)("ul",{className:"menu__list",children:[Object(l.jsx)("li",{className:"menu__item",children:Object(l.jsx)(o.c,{to:"/",className:"menu__link",activeClassName:"menu__link_active",exact:!0,children:"\u0410\u0441\u0442\u0435\u0440\u043e\u0438\u0434\u044b"})}),Object(l.jsx)("li",{className:"menu__item",children:Object(l.jsx)(o.c,{to:"/destroy",className:"menu__link",activeClassName:"menu__link_active",children:"\u0423\u043d\u0438\u0447\u0442\u043e\u0436\u0435\u043d\u0438\u0435"})})]})})})]})})}function _(){return Object(l.jsx)("footer",{className:"footer",children:Object(l.jsx)("div",{className:"footer__copyright",children:"2021 \xa9 \u0412\u0441\u0435 \u043f\u0440\u0430\u0432\u0430 \u0438 \u043f\u043b\u0430\u043d\u0435\u0442\u0430 \u0437\u0430\u0449\u0438\u0449\u0435\u043d\u044b"})})}a(45);function h(e){var t=e.asteroid,a=e.distanceUnit,s=e.changeCart,c=e.isInCart;return Object(l.jsxs)("article",{className:"asteroid ".concat(t.isDangerous?"asteroid_dangerous":""),children:[Object(l.jsxs)("div",{className:"asteroid__image-wrap",children:[Object(l.jsx)("div",{className:"asteroid__image asteroid__image_dino"}),Object(l.jsx)("div",{className:"asteroid__image asteroid__image_asteroid",style:{backgroundSize:t.size/1.4,width:t.size/1.4,height:t.size/1.4}})]}),Object(l.jsxs)("div",{className:"asteroid__body",children:[Object(l.jsxs)("div",{className:"asteroid__info",children:[Object(l.jsx)("h2",{className:"asteroid__title",children:Object(l.jsx)(o.b,{to:"asteroids/"+t.id,className:"asteroid__link",children:t.name})}),Object(l.jsxs)("div",{className:"asteroid__attrs",children:[Object(l.jsx)(b,{name:"\u0414\u0430\u0442\u0430",value:new Date(t.unixtime).toLocaleString("ru",{year:"numeric",month:"long",day:"numeric"}).slice(0,-3)}),Object(l.jsx)(b,{name:"\u0420\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0435",value:function(){switch(null===a||void 0===a?void 0:a.name){case"lunar":return t.distanceLunar.toLocaleString("ru-RU")+" \u0434\u0438\u0441\u0442. \u0434\u043e \u043b\u0443\u043d\u044b";default:return t.distanceKM.toLocaleString("ru-RU")+" \u043a\u043c"}}()}),Object(l.jsx)(b,{name:"\u0420\u0430\u0437\u043c\u0435\u0440",value:t.size.toLocaleString("ru-RU")+" \u043c"})]})]}),Object(l.jsxs)("div",{className:"asteroid__btn-wrap",children:[Object(l.jsxs)("div",{className:"asteroid__verdict",children:[Object(l.jsx)("div",{className:"asteroid__verdict-title",children:"\u041e\u0446\u0435\u043d\u043a\u0430:"}),Object(l.jsx)("div",{className:"asteroid__verdict-status",children:t.isDangerous?"\u043e\u043f\u0430\u0441\u0435\u043d":"\u043d\u0435 \u043e\u043f\u0430\u0441\u0435\u043d"})]}),Object(l.jsx)("button",{className:"asteroid__btn asteroid__btn_destroy",onClick:s.bind(null,t),children:c?"\u041d\u0435 \u0443\u043d\u0438\u0447\u0442\u043e\u0436\u0430\u0442\u044c":"\u041d\u0430 \u0443\u043d\u0438\u0447\u0442\u043e\u0436\u0435\u043d\u0438\u0435"})]})]})]})}function m(e){var t=e.approach;return Object(l.jsx)("article",{className:"approach",children:Object(l.jsxs)("div",{className:"approach__attrs",children:[Object(l.jsx)(b,{name:"\u0421\u043a\u043e\u0440\u043e\u0441\u0442\u044c",value:t.velocity.toLocaleString("ru-RU")+" \u043a\u043c/\u0447"},"1"),Object(l.jsx)(b,{name:"\u0412\u0440\u0435\u043c\u044f",value:t.full_date.toLocaleDateString()+" "+t.full_date.toLocaleTimeString()},"2"),Object(l.jsx)(b,{name:"\u0420\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0435",value:t.distance.toLocaleString("ru-RU")+" \u043a\u043c"},"3"),Object(l.jsx)(b,{name:"\u041e\u0440\u0431\u0438\u0442\u0430",value:t.orbiting_body},"4")]})})}function b(e){var t=e.name,a=e.value;return Object(l.jsxs)("dl",{className:"attr",children:[Object(l.jsx)("dt",{className:"attr__name",children:t}),Object(l.jsx)("dd",{className:"attr__value",children:Object(l.jsx)("span",{children:a})})]})}function O(e){var t=e.params,a=e.asteroids,s=e.distanceUnit;return Object(l.jsx)("div",{className:"asteroids",children:a.map((function(e){return Object(l.jsx)(h,{asteroid:e,distanceUnit:s,isInCart:t.checkIsInCart(e.id),changeCart:t.changeCart},e.id)}))})}var p=a(19),x=a.n(p),v="cA2J0g0DcooBp1BYlwwEmW92VJQ5qcY5RzIYcYcL";function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=new Date,a=new Date;return e?(t.setDate(t.getDate()+2*e),a.setDate(t.getDate()+1)):(t.setDate(t.getDate()+e),a.setDate(t.getDate()+1)),"https://www.neowsapp.com/rest/v1/feed?start_date=".concat(t.toISOString().split("T")[0],"&end_date=").concat(a.toISOString().split("T")[0],"&detailed=false&api_key=").concat(v)}var g=a(31),N=a.n(g),y=a(32),k=a.n(y);a(65);function S(){return Object(l.jsx)("div",{className:"loader",children:Object(l.jsx)(k.a,{color:"#1C94C4",loading:!0,size:70})})}function D(){var e=Object(s.useState)(0),t=Object(d.a)(e,2),a=t[0],c=t[1],n=Object(s.useState)(!1),i=Object(d.a)(n,2),o=i[0],u=i[1],_=Object(s.useState)(!1),h=Object(d.a)(_,2),m=h[0],b=h[1],p=Object(s.useState)([]),v=Object(d.a)(p,2),g=v[0],y=v[1],k=Object(s.useState)(!1),D=Object(d.a)(k,2),C=D[0],w=D[1],U=Object(s.useState)([{name:"km",title:"\u0432 \u043a\u0438\u043b\u043e\u043c\u0435\u0442\u0440\u0430\u0445",active:!0},{name:"lunar",title:"\u0432 \u0434\u0438\u0441\u0442\u0430\u043d\u0446\u0438\u044f\u0445 \u0434\u043e \u043b\u0443\u043d\u044b",active:!1}]),L=Object(d.a)(U,2),z=L[0],M=L[1];function E(){o||(u(!0),function(){var e=f(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0);return x.a.get(e).then((function(e){return 0!==parseInt(e.data.element_count)&&Object.values(e.data.near_earth_objects).flat().map((function(e){return{id:e.id,name:e.name,size:parseInt((e.estimated_diameter.meters.estimated_diameter_max+e.estimated_diameter.meters.estimated_diameter_min)/2),isDangerous:e.is_potentially_hazardous_asteroid,distanceKM:parseInt(e.close_approach_data[0].miss_distance.kilometers),distanceLunar:parseInt(e.close_approach_data[0].miss_distance.lunar),unixtime:e.close_approach_data[0].epoch_date_close_approach,date:new Date(e.close_approach_data[0].epoch_date_close_approach)}})).sort((function(e,t){return e.unixtime-t.unixtime}))}))}(a).then((function(e){!1!==e?(y([].concat(Object(r.a)(g),Object(r.a)(e))),c(a+1)):b(!0)})).catch((function(e){console.log(e),b(!0)})).finally((function(){u(!1)})))}function J(){w(!C)}function R(e){M(z.map((function(t,a){return t.active=a===e,t})))}return Object(l.jsx)(j,{children:function(e){return Object(l.jsxs)("div",{className:"home-content",children:[Object(l.jsx)(I,{handleChangeOnlyDangerous:J,distanceUnits:z,handleChangeDistanceUnits:R}),Object(l.jsx)(N.a,{pageStart:0,loadMore:E,hasMore:!m,loader:Object(l.jsx)(S,{}),children:Object(l.jsx)(O,{asteroids:C?g.filter((function(e){return e.isDangerous})):g,params:e,distanceUnit:z.find((function(e){return e.active}))})})]})}},"home-page")}function I(e){var t=e.handleChangeOnlyDangerous,a=e.distanceUnits,s=e.handleChangeDistanceUnits;return Object(l.jsxs)("div",{className:"settings",children:[Object(l.jsxs)("div",{className:"settings__field",children:[Object(l.jsx)("input",{type:"checkbox",className:"settings__only-dangerous",id:"settings__only-dangerous",onChange:t}),Object(l.jsx)("label",{className:"settings__label",htmlFor:"settings__only-dangerous",children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u043e\u043f\u0430\u0441\u043d\u044b\u0435"})]}),Object(l.jsxs)("div",{className:"settings__distance",children:["\u0420\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0435 ",a.map((function(e,t){var a=e.active?"link_active":"";return Object(l.jsx)("span",{className:"settings__change-distance",children:Object(l.jsx)("a",{href:"#",className:"link "+a,onClick:s.bind(null,t),children:e.title})},t)}))]})]})}var C=a(2);a(72);function w(){var e=Object(C.f)();function t(t){alert("\u0411\u0440\u0438\u0433\u0430\u0434\u0430 \u0431\u0443\u0434\u0435\u0442 \u0434\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0430 \u043d\u0430 \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0430\u0441\u0442\u0435\u0440\u043e\u0438\u0434\u044b \u0432 \u043d\u0443\u0436\u043d\u044b\u0439 \u043c\u043e\u043c\u0435\u043d\u0442 \u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442 \u0441\u0432\u043e\u044e \u043d\u0435\u043b\u0451\u0433\u043a\u0443\u044e \u0440\u0430\u0431\u043e\u0442\u0443."),t(),e.push("/")}function a(e){return e.cart.length?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(O,{params:e,asteroids:e.cart}),Object(l.jsx)("div",{className:"destroy__content",children:Object(l.jsx)("button",{className:"destroy__order-btn btn btn_destroy",onClick:t.bind(null,e.resetCart),children:"\u0417\u0430\u043a\u0430\u0437\u0430\u0442\u044c \u0431\u0440\u0438\u0433\u0430\u0434\u0443 \u0438\u043c. \u0411\u0440\u044e\u0441\u0430 \u0423\u0438\u043b\u043b\u0438\u0441\u0430 \u043d\u0430 \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0430\u0441\u0442\u0435\u0440\u043e\u0438\u0434\u044b."})})]}):Object(l.jsx)("div",{className:"destroy__empty",children:"\u0410\u0441\u0442\u0435\u0440\u043e\u0438\u0434\u044b \u0434\u043b\u044f \u0443\u043d\u0438\u0447\u0442\u043e\u0436\u0435\u043d\u0438\u044f \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u044b"})}return Object(l.jsx)(j,{children:function(e){return Object(l.jsx)("div",{className:"destroy-content",children:a(e)})}},"destroy-page")}function U(){var e=Object(C.g)().asteroid_id,t=Object(C.f)(),a=Object(s.useState)(!1),c=Object(d.a)(a,2),n=c[0],i=c[1];return Object(s.useEffect)((function(){var a;(a=e,x.a.get("https://api.nasa.gov/neo/rest/v1/neo/".concat(a,"?api_key=DEMO_KEY")).then((function(e){var t=e.data;return{id:t.id,name:t.name,size:parseInt((t.estimated_diameter.meters.estimated_diameter_max+t.estimated_diameter.meters.estimated_diameter_min)/2),isDangerous:t.is_potentially_hazardous_asteroid,distanceKM:parseInt(t.close_approach_data[0].miss_distance.kilometers),distanceLunar:parseInt(t.close_approach_data[0].miss_distance.lunar),date:new Date(t.close_approach_data[0].epoch_date_close_approach),unixtime:t.close_approach_data[0].epoch_date_close_approach,approach_data:t.close_approach_data.map((function(e){return{velocity:parseInt(e.relative_velocity.kilometers_per_hour),full_date:new Date(e.epoch_date_close_approach),distance:parseInt(e.miss_distance.kilometers),orbiting_body:e.orbiting_body}}))}}))).then((function(e){i(e)})).catch((function(e){var a;404===(null===(a=e.response)||void 0===a?void 0:a.status)?t.push("/404"):alert("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445")}))}),[e]),Object(l.jsx)(j,{children:function(e){return n?Object(l.jsxs)("div",{className:"asteroid-content",children:[Object(l.jsx)(h,{asteroid:n,changeCart:e.changeCart,isInCart:e.checkIsInCart(n.id)}),Object(l.jsxs)("section",{className:"approaches",children:[Object(l.jsx)("h2",{className:"approached__title",children:"\u0412\u0441\u0435 \u0441\u0431\u043b\u0438\u0436\u0435\u043d\u0438\u044f"}),Object(l.jsx)("div",{className:"approaches__content",children:n.approach_data.map((function(e,t){return Object(l.jsx)(m,{approach:e},t)}))})]})]}):Object(l.jsx)(S,{})}},"asteroid-page")}a(73);function L(){return Object(l.jsx)(j,{children:function(e){return Object(l.jsxs)("div",{className:"no-found-page",children:[Object(l.jsx)("h2",{className:"no-found-page__code",children:"404"}),Object(l.jsx)("div",{children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"})]})}},"no-found-page")}var z=function(){return Object(l.jsx)(o.a,{children:Object(l.jsxs)(C.c,{children:[Object(l.jsx)(C.a,{path:"/destroy",children:Object(l.jsx)(w,{})}),Object(l.jsx)(C.a,{path:"/asteroids/:asteroid_id",children:Object(l.jsx)(U,{})}),Object(l.jsx)(C.a,{path:"/",exact:!0,children:Object(l.jsx)(D,{})}),Object(l.jsx)(C.a,{path:"*",children:Object(l.jsx)(L,{})})]})})};i.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(z,{})}),document.getElementById("root"))}},[[75,1,2]]]);
//# sourceMappingURL=main.8c5c1aea.chunk.js.map